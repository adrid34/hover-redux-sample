var Hoverboard=function(){"use strict";function n(n,t){var r,o,e=[];for(r=0;r<n.length;r++)o=n[r],o!==t&&e.push(o);return e}function t(n){return"function"==typeof n}function r(n){return n&&"object"==typeof n&&("number"!=typeof n.length||!t(n.splice))}function o(n,r,o){var e,i,u,f=function(){return o(this),e?e.apply(this,[r]):void 0};t(n)?(i=n.prototype,e=n):i=n;for(u in i)f.prototype[u]=i[u];return f}var e=[].slice;return function(i){var u,f,a={},c=[],l=0,p=0,h=function(n){var t,o,e;if(p)throw new Error("Hoverboard: Cannot change state during a state change event");if(p=1,r(a)&&r(n))for(t in n)a[t]=n[t];else a=n;try{for(e=c,o=0;o<e.length;o++)e[o](v())}finally{p=0}},s=function(t){return c.push(t),t(v()),function(){t&&(c=n(c,t),t=null)}},v=function(){return a},y=function(n){return function(r,o,i){if(l)throw new Error("Hoverboard: Cannot call action in the middle of an action");l=1;var u,a,c,p=v(),s=arguments.length;try{0===s?u=f[n](p):1===s?u=f[n](p,r):2===s?u=f[n](p,r,o):3===s?u=f[n](p,r,o,i):(a=[p].concat(e.call(arguments,0)),u=f[n].apply(f,a)),t(u)?u(h):u!==c&&h(u)}finally{l=0}}},g=function(n){return t(n)?s(n):v()};i=o(i,h,function(n){f=n}),f=new i;for(u in f)g[u]=y(u);return g}}();